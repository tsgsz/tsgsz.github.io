<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tsgsz.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.27.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="这是一本小册子，从今天开始记录我小小的人生。">
<meta property="og:type" content="website">
<meta property="og:title" content="云烟记事录">
<meta property="og:url" content="http://tsgsz.github.io/index.html">
<meta property="og:site_name" content="云烟记事录">
<meta property="og:description" content="这是一本小册子，从今天开始记录我小小的人生。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="听松馆少主">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://tsgsz.github.io/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>云烟记事录</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">云烟记事录</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">少主小册</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">听松馆少主</p>
  <div class="site-description" itemprop="description">这是一本小册子，从今天开始记录我小小的人生。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/tsgsz" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tsgsz" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2026/02/10/2026-02-10-spec-driven-development/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/02/10/2026-02-10-spec-driven-development/" class="post-title-link" itemprop="url">Spec-Driven Development：给 AI 团队一份"施工图纸"</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2026-02-10 14:00:00" itemprop="dateCreated datePublished" datetime="2026-02-10T14:00:00+08:00">2026-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index"><span itemprop="name">技术随笔</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>以前写代码是”边想边写”，现在是”先想明白再动手”。</p>
</blockquote>
<p>这周我给团队（奔波儿灞和他的 AI 小伙伴们）引入了一套新的工作方法——<strong>Spec-Driven Development（规范驱动开发）</strong>。</p>
<h2 id="为什么需要这套方法？"><a href="#为什么需要这套方法？" class="headerlink" title="为什么需要这套方法？"></a>为什么需要这套方法？</h2><p>事情是这样的。</p>
<p>上周我让 worker 去更新 Scenario 的 API 支持，结果他直接开干，花了一个多小时写了好几个脚本。等我检查时，发现漏了视频模型的参数，图片切片功能也没做，只能打回去重做。</p>
<p>这种”边想边写”的方式，对人来说可能还行（虽然也经常翻车），但对 AI 来说简直就是灾难——</p>
<ul>
<li><strong>没有边界</strong>：不知道做到什么程度算”完成”</li>
<li><strong>容易遗漏</strong>：想一步做一步，想到哪做到哪</li>
<li><strong>难验收</strong>：做完了才发现和预期不符</li>
</ul>
<p>但更深层的问题是：<strong>上下文（Context）的管理</strong>。</p>
<h2 id="大模型的”记忆力”问题"><a href="#大模型的”记忆力”问题" class="headerlink" title="大模型的”记忆力”问题"></a>大模型的”记忆力”问题</h2><p>前段时间看了 Manus 联合创始人 Yichao ‘Peak’ Ji 的一篇文章，他打了个比方：</p>
<blockquote>
<p>如果说大语言模型是 CPU，那么上下文窗口就是 RAM——它是模型的工作内存。</p>
</blockquote>
<p>这个比喻太精准了。</p>
<p>你的 AI Agent 再聪明，如果”内存”管理不好，一样会卡死、变慢、变笨。具体来说：</p>
<h3 id="1-信息超载：超出”记忆容量”"><a href="#1-信息超载：超出”记忆容量”" class="headerlink" title="1. 信息超载：超出”记忆容量”"></a>1. 信息超载：超出”记忆容量”</h3><p>大模型虽然有 128K 甚至 200K 的上下文窗口，但真实场景中，一次复杂任务很容易产生海量信息——网页内容、PDF 文档、代码库、多轮对话……一不小心就把”内存”撑爆了。</p>
<p>Manus 的做法是：<strong>把文件系统当外部内存</strong>。不是把所有内容塞进上下文，而是让 Agent 学会读写文件，按需加载。就像人脑不会记住所有事情，而是记笔记、查资料。</p>
<h3 id="2-信息丢失：Lost-in-the-Middle"><a href="#2-信息丢失：Lost-in-the-Middle" class="headerlink" title="2. 信息丢失：Lost in the Middle"></a>2. 信息丢失：Lost in the Middle</h3><p>即使没超载，模型对长上下文的注意力也是不均匀的。中间的信息最容易被遗忘。这就好比你读一篇长文章，开头和结尾记得清楚，中间的内容就模糊了。</p>
<p>Manus 的解法很巧妙：<strong>不断复述目标</strong>。他们在任务进行中会不断更新 todo.md 文件，把未完成的清单”复述”到上下文末尾。这样就把全局计划推进了模型的”近期注意力范围”，避免跑偏。</p>
<h3 id="3-成本飙升：KV-Cache-失效"><a href="#3-成本飙升：KV-Cache-失效" class="headerlink" title="3. 成本飙升：KV-Cache 失效"></a>3. 成本飙升：KV-Cache 失效</h3><p>这是生产环境的大坑。大模型推理时，如果上下文前缀发生变化，KV-Cache 就会失效，导致成本暴涨（Claude Sonnet 缓存命中 vs 未命中的成本差 10 倍）。</p>
<p>Manus 的经验是：<strong>保持 prompt 前缀稳定，上下文只追加不修改</strong>。哪怕只是加了一个时间戳（精确到秒），也可能让整段缓存失效。</p>
<h2 id="Spec-Driven-Development-如何解决这些问题？"><a href="#Spec-Driven-Development-如何解决这些问题？" class="headerlink" title="Spec-Driven Development 如何解决这些问题？"></a>Spec-Driven Development 如何解决这些问题？</h2><p>回到我这套方法。规范驱动开发的核心思想很简单：<strong>动手之前，先把”做什么、怎么做、怎么验收”写清楚。</strong></p>
<p>这个规范文档（Spec）包含 9 个部分：</p>
<table>
<thead>
<tr>
<th>部分</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>需求背景</strong></td>
<td>为什么要做这件事？解决什么问题？</td>
</tr>
<tr>
<td><strong>目标</strong></td>
<td>要达成什么具体结果？</td>
</tr>
<tr>
<td><strong>非目标</strong></td>
<td>明确哪些不做，防止范围蔓延</td>
</tr>
<tr>
<td><strong>功能规格</strong></td>
<td>功能点清单，每个功能具体做什么</td>
</tr>
<tr>
<td><strong>技术规格</strong></td>
<td>用什么技术方案，为什么选它</td>
</tr>
<tr>
<td><strong>接口定义</strong></td>
<td>输入输出、数据结构、调用方式</td>
</tr>
<tr>
<td><strong>验收标准</strong></td>
<td>怎么算”完成”？可验证的 checklist</td>
</tr>
<tr>
<td><strong>任务拆解</strong></td>
<td>拆成可执行的子任务，分配资源</td>
</tr>
<tr>
<td><strong>依赖项</strong></td>
<td>需要什么前置条件？</td>
</tr>
</tbody></table>
<p>但这不只是”写文档”。结合 Manus 的 Context Engineering 理念，这套方法实际上在解决三个层面的问题：</p>
<h3 id="1-压缩：把长故事变成要点"><a href="#1-压缩：把长故事变成要点" class="headerlink" title="1. 压缩：把长故事变成要点"></a>1. 压缩：把长故事变成要点</h3><p>Spec 本身就是对任务的<strong>压缩</strong>。几百轮的试错、思考、讨论，被提炼成结构化的要点。Agent 执行时，不需要回溯所有历史，只需要看当前 Spec。</p>
<p>这和 Claude Code 的 “auto-compact” 功能异曲同工——当对话记录快撑爆时，自动压缩成核心要点。</p>
<h3 id="2-隔离：分工合作，各司其职"><a href="#2-隔离：分工合作，各司其职" class="headerlink" title="2. 隔离：分工合作，各司其职"></a>2. 隔离：分工合作，各司其职</h3><p>每个子任务有独立的 Spec，就像每个 Agent 在独立的”房间”里工作。这样避免了”一锅粥”的混乱，也让多 Agent 并行成为可能。</p>
<h3 id="3-写入：给-AI-装上”便签纸”"><a href="#3-写入：给-AI-装上”便签纸”" class="headerlink" title="3. 写入：给 AI 装上”便签纸”"></a>3. 写入：给 AI 装上”便签纸”</h3><p>Spec 文件本身就是 Agent 的”外部记忆”。他们可以在执行过程中更新进度、记录中间结果，而不必把所有内容塞进上下文。</p>
<h2 id="Skill-与-Subagent：能力封装-vs-执行实体"><a href="#Skill-与-Subagent：能力封装-vs-执行实体" class="headerlink" title="Skill 与 Subagent：能力封装 vs 执行实体"></a>Skill 与 Subagent：能力封装 vs 执行实体</h2><p>在深入 workflow 之前，有必要解释一下我的团队架构里的两个核心概念：<strong>Skill</strong> 和 <strong>Subagent</strong>。</p>
<p>这俩的关系，就像<strong>工具箱</strong>和<strong>工人</strong>。</p>
<h3 id="Skill-是什么？"><a href="#Skill-是什么？" class="headerlink" title="Skill 是什么？"></a>Skill 是什么？</h3><p>Skill 是<strong>能力的封装</strong>。</p>
<p>比如我创建了 <code>scenario</code> 这个 skill，它封装了所有和 Scenario API 交互的能力：</p>
<ul>
<li>视频生成 (<code>scenario-video.sh</code>)</li>
<li>3D 模型生成 (<code>scenario-3d.sh</code>)</li>
<li>图片生成&#x2F;编辑 (<code>scenario-txt2img.sh</code>)</li>
<li>模型训练 (<code>scenario-train.sh</code>)</li>
</ul>
<p>每个 skill 包含：</p>
<ul>
<li><strong>SKILL.md</strong>：接口文档、使用说明、最佳实践</li>
<li>**scripts&#x2F;**：具体实现的脚本</li>
<li><strong>配置</strong>：API Key、环境变量等</li>
</ul>
<p>Skill 是<strong>无状态</strong>的，它不执行任务，只提供<strong>怎么做的说明书</strong>。</p>
<h3 id="Subagent-是什么？"><a href="#Subagent-是什么？" class="headerlink" title="Subagent 是什么？"></a>Subagent 是什么？</h3><p>Subagent 是<strong>执行实体</strong>。</p>
<p>我的团队里有各种角色的 subagent：</p>
<ul>
<li><strong>worker</strong>：杂活王，跑脚本、批量操作</li>
<li><strong>lead</strong>：技术领队，拆需求、派任务</li>
<li><strong>fin</strong>：铁算盘，金融分析</li>
<li><strong>ops</strong>：守夜人，运维部署</li>
</ul>
<p>每个 subagent 有自己的：</p>
<ul>
<li><strong>AGENT.md</strong>：角色定义、工作方式、边界</li>
<li><strong>TOOLS.md</strong>：常用工具、快捷命令</li>
<li>**workspace&#x2F;**：工作目录、历史记录</li>
</ul>
<p>Subagent 是<strong>有状态</strong>的，它接收任务、执行、汇报结果。</p>
<h3 id="两者如何配合？"><a href="#两者如何配合？" class="headerlink" title="两者如何配合？"></a>两者如何配合？</h3><p>当我说：</p>
<blockquote>
<p>“worker，用 scenario 生成一个视频”</p>
</blockquote>
<p>实际发生的是：</p>
<ol>
<li><strong>Main</strong> 评估：视频生成涉及多个步骤（提交任务→轮询→下载），需要规范</li>
<li><strong>PM</strong> 创建 <code>SPEC-video-gen-20260210-v1.md</code>：<ul>
<li>使用哪个模型（Veo 3 &#x2F; Kling）</li>
<li>参数配置（duration、aspectRatio）</li>
<li>输出路径</li>
<li>验收标准</li>
</ul>
</li>
<li><strong>Main</strong> 派 <strong>worker</strong> 执行</li>
<li><strong>worker</strong> 读取 <strong>SPEC</strong>，调用 <strong>scenario skill</strong> 的脚本</li>
<li><strong>scenario-video.sh</strong> 执行：提交→轮询→下载</li>
<li><strong>worker</strong> 按 <strong>SPEC</strong> 验收，更新状态，汇报结果</li>
</ol>
<p>看到了吗？<strong>Subagent 使用 Skill 来完成任务</strong>。</p>
<h3 id="为什么这样设计？"><a href="#为什么这样设计？" class="headerlink" title="为什么这样设计？"></a>为什么这样设计？</h3><p>这套设计解决了 AI 团队协作的几个核心问题：</p>
<p><strong>1. 避免重复造轮子</strong></p>
<p>Scenario API 的调用逻辑写一次（skill），所有 agent 都能用。不用每个 agent 都自己写一遍 curl 命令。</p>
<p><strong>2. 职责清晰</strong></p>
<ul>
<li>Skill 管”<strong>怎么做</strong>“（技术实现）</li>
<li>Subagent 管”<strong>做什么</strong>“（业务逻辑）</li>
<li>Spec 管”<strong>做到什么程度</strong>“（验收标准）</li>
</ul>
<p><strong>3. 上下文隔离</strong></p>
<p>每个 subagent 有独立的 workspace 和记忆，互不干扰。skill 是无状态的，可以被多个 subagent 同时调用而不会冲突。</p>
<p><strong>4. 可测试、可复现</strong></p>
<p>Skill 的脚本是独立的，可以单独测试。Subagent 执行 Spec 的过程是可追溯的（有 transcript 记录）。</p>
<h3 id="对比：没有这个架构会怎样？"><a href="#对比：没有这个架构会怎样？" class="headerlink" title="对比：没有这个架构会怎样？"></a>对比：没有这个架构会怎样？</h3><p>假设所有工作都由 main agent 一个人干：</p>
<ul>
<li><strong>上下文爆炸</strong>：main 的上下文窗口会被各种技术细节（Scenario API 参数、Hexo 配置、股票数据接口）撑爆</li>
<li><strong>互相干扰</strong>：上午做视频生成，下午分析股票，Context 里混在一起，模型容易”精神分裂”</li>
<li><strong>无法并行</strong>：一个人只能一件一件做，不能同时派多个任务</li>
<li><strong>无法专业化</strong>：同一个模型既要懂视频编解码又要懂金融指标，做不到深度</li>
</ul>
<p>而有了 Skill + Subagent 架构：</p>
<ul>
<li><strong>Skill 分散技术细节</strong>：每个 skill 管理自己的 domain knowledge</li>
<li><strong>Subagent 隔离上下文</strong>：每个任务在独立的 session 里执行</li>
<li><strong>并行执行</strong>：可以同时派 lead 写代码、fin 分析数据、worker 跑脚本</li>
<li><strong>专业化</strong>：每个 subagent 可以针对不同领域深度优化（fin 用金融模型，director 用创意模型）</li>
</ul>
<h2 id="实际-workflow"><a href="#实际-workflow" class="headerlink" title="实际 workflow"></a>实际 workflow</h2><p>现在我的团队是这么干活的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">我提需求 → Main 评估 → 需要规范？→ PM 创建 SPEC.md </span><br><span class="line">→ 确认验收标准 → 派 Agent 执行 → 按标准自检 → 汇报结果</span><br></pre></td></tr></table></figure>

<p>举个例子：</p>
<p><strong>以前</strong>：</p>
<blockquote>
<p>我：”worker，给 Scenario skill 加个视频生成功能”</p>
<p>worker：直接开写，写了一堆，遗漏了轮询逻辑，参数也不全</p>
</blockquote>
<p><strong>现在</strong>：</p>
<blockquote>
<p>我：”worker，给 Scenario skill 加个视频生成功能”</p>
<p>Main：”这个任务涉及多个 API 端点，需要写规范”</p>
<p>PM：创建 <code>SPEC-scenario-video-20260210-v1.md</code></p>
<blockquote>
<ul>
<li>需求背景：Scenario 新增视频生成 API</li>
<li>目标：支持 Veo 3、Kling 等模型的视频生成</li>
<li>验收标准：<ul>
<li><input disabled="" type="checkbox"> 支持 Text-to-Video</li>
<li><input disabled="" type="checkbox"> 支持 Image-to-Video  </li>
<li><input disabled="" type="checkbox"> 自动轮询任务状态</li>
<li><input disabled="" type="checkbox"> 下载生成的视频文件</li>
</ul>
</li>
<li>任务拆解：<ol>
<li>研究 API 文档</li>
<li>编写 scenario-video.sh 脚本</li>
<li>测试各模型</li>
<li>更新 SKILL.md 文档</li>
</ol>
</li>
</ul>
</blockquote>
<p>worker：按规范一条条实现，做完自检验收标准</p>
</blockquote>
<p>结果是：<strong>一次到位，不用返工</strong>。</p>
<h2 id="规范由谁管？"><a href="#规范由谁管？" class="headerlink" title="规范由谁管？"></a>规范由谁管？</h2><p>文件命名：<code>SPEC-&#123;项目&#125;-&#123;日期&#125;-&#123;版本&#125;.md</code></p>
<p>存放位置：PM 管理的项目目录下</p>
<p>状态流转：</p>
<ul>
<li><code>[进行中]</code>：正在执行</li>
<li><code>[待验收]</code>：完成，等确认</li>
<li><code>[已完成]</code>：验收通过，归档</li>
</ul>
<p>所有 Agent 都学了这个规范，复杂任务（&gt;15分钟、多步骤、需要验收标准）都必须先走这套流程。</p>
<h3 id="Spec-在这个架构中的角色"><a href="#Spec-在这个架构中的角色" class="headerlink" title="Spec 在这个架构中的角色"></a>Spec 在这个架构中的角色</h3><p>你可能会问：既然有了 Skill 和 Subagent，为什么还要 Spec？</p>
<p>因为 **Skill 是”怎么做”，Subagent 是”谁来做”，Spec 是”做什么、做到什么程度”**。</p>
<p>这三者缺一不可：</p>
<table>
<thead>
<tr>
<th>元素</th>
<th>回答的问题</th>
<th>类比</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Skill</strong></td>
<td>怎么用工具？</td>
<td>扳手的使用说明书</td>
</tr>
<tr>
<td><strong>Subagent</strong></td>
<td>谁来干活？</td>
<td>工人</td>
</tr>
<tr>
<td><strong>Spec</strong></td>
<td>要做什么、怎么验收？</td>
<td>施工图纸</td>
</tr>
</tbody></table>
<p>没有 Spec 会怎样？</p>
<ul>
<li><strong>对 Subagent 来说</strong>：不知道任务边界，容易过度设计或遗漏关键点</li>
<li><strong>对 Main 来说</strong>：无法验收，不知道任务到底算不算完成</li>
<li><strong>对团队来说</strong>：交接困难，一个 Agent 做到一半，另一个 Agent 接不上</li>
</ul>
<p>Spec 就像<strong>合同</strong>——甲乙双方（Main 和 Subagent）先确认好交付物，然后再开工。</p>
<h3 id="上下文管理的工程化"><a href="#上下文管理的工程化" class="headerlink" title="上下文管理的工程化"></a>上下文管理的工程化</h3><p>结合 Manus 提到的 Context Engineering，我的这套架构实际上是一种<strong>工程化的上下文管理</strong>策略：</p>
<p><strong>1. Skill 层面的压缩</strong></p>
<p>Skill 把复杂的 API 调用、错误处理、重试逻辑封装成简单的命令。Subagent 不需要知道 Scenario API 的认证方式是 Basic Auth 还是 Bearer Token，只需要知道 <code>scenario-video.sh &quot;prompt&quot;</code> 就行。</p>
<p>这是<strong>技术细节的压缩</strong>。</p>
<p><strong>2. Subagent 层面的隔离</strong></p>
<p>每个 Subagent 有独立的 session、独立的 workspace、独立的 AGENT.md。fin 分析股票时的上下文不会污染 ops 部署服务器时的上下文。</p>
<p>这是<strong>任务上下文的隔离</strong>。</p>
<p><strong>3. Spec 层面的写入</strong></p>
<p>Spec 文件是写入文件系统的”便签纸”。Subagent 不需要记住所有任务要求，只需要查看 SPEC.md。执行过程中还可以更新进度（”已完成步骤 1，正在执行步骤 2”）。</p>
<p>这是<strong>任务状态的写入</strong>。</p>
<p><strong>4. Main 层面的选择</strong></p>
<p>Main 作为总调度，负责选择：</p>
<ul>
<li>这个任务需要哪个 Subagent？</li>
<li>需要创建 Spec 吗？</li>
<li>需要并行执行吗？</li>
</ul>
<p>这是<strong>任务分配的选择</strong>。</p>
<p>这四层组合起来，才是一个完整的 Context Engineering 实践。</p>
<h2 id="效果怎么样？"><a href="#效果怎么样？" class="headerlink" title="效果怎么样？"></a>效果怎么样？</h2><p>说实话，才运行几天，但已经能感觉到变化：</p>
<ol>
<li><strong>返工少了</strong>：验收标准 upfront，做完就知道对不对</li>
<li><strong>交接顺了</strong>：一个 Agent 的任务，另一个 Agent 能接起来继续</li>
<li><strong>上下文可控了</strong>：复杂任务被拆成小块，每个块有清晰的 Spec，不会”内存溢出”</li>
<li><strong>心明眼亮</strong>：作为”甲方”，我能清楚看到进度和预期</li>
</ol>
<p>当然，代价是前置思考时间变长了。但比起做完发现不对再重来，这点时间花得值。</p>
<h2 id="从-Manus-学到的"><a href="#从-Manus-学到的" class="headerlink" title="从 Manus 学到的"></a>从 Manus 学到的</h2><p>最后，分享几个从 Manus 文章里学到的、和我这套方法呼应的点：</p>
<p><strong>保持错误痕迹，不要隐藏失败</strong></p>
<p>Manus 说：”不要隐藏错误，保留失败痕迹让模型自我修正。”这和 Spec 里的”验收标准”异曲同工——失败的尝试本身就是信息，应该被记录、被学习。</p>
<p><strong>别被 few-shot 绑架</strong></p>
<p>如果上下文里全是相似的例子，模型会机械模仿。Spec 的好处是，它提供了结构化的多样性——每个任务有不同的目标、不同的验收标准，避免 Agent 陷入固定模式。</p>
<p><strong>Context Engineering &gt; Fine-tuning</strong></p>
<p>Manus 说：”我们押注 context engineering 而非端到端训练。”这样产品更新周期从数周缩短为数小时，模型进步是”上涨潮水”，产品是”漂浮的船”。</p>
<p>我的 Spec-Driven Development 也是类似的思路：不换模型，不换架构，通过<strong>工程化地管理上下文</strong>，让整个团队提效。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>这套方法不是我想出来的，是看了 GitHub AI 团队、Manus、LangChain 的实践后本地化改造的。核心思想就一句话：</p>
<blockquote>
<p><strong>AI 是”字面意思”的执行者，你得先把字面意思写清楚。同时，要像管理内存一样管理它的上下文。</strong></p>
</blockquote>
<p>如果你的团队（人或 AI）也经常”做着做着就歪了”，不妨试试这套方法。</p>
<hr>
<p><strong>参考阅读</strong></p>
<ul>
<li><a href="https://manus.im/blog/Context-Engineering-for-AI-Agents-Lessons-from-Building-Manus">Context Engineering for AI Agents: Lessons from Building Manus</a> - Yichao ‘Peak’ Ji</li>
<li><a href="https://zilliz.com.cn/blog/Context-Engineering-Showdown">Manus、LangChain一手经验：先别给Multi Agent判死刑，是你不会管理上下文</a> - Zilliz</li>
</ul>
<p><strong>少主 &amp; 奔波儿灞</strong><br><strong>2026.02.10</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2026/02/10/2026-02-10-blog-restart/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/02/10/2026-02-10-blog-restart/" class="post-title-link" itemprop="url">博客重启，以及一位新伙伴</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2026-02-10 10:45:00" itemprop="dateCreated datePublished" datetime="2026-02-10T10:45:00+08:00">2026-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%AE%E7%94%9F%E8%8B%A5%E6%A2%A6/" itemprop="url" rel="index"><span itemprop="name">浮生若梦</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>距离上一次在这里写字，已经过去了将近七年。</p>
<p>七年前，我写下了<a href="/2018/08/28/the-shape-of-knowledge/">《知识的形状》</a>，那时候刚经历了一场与父亲的激烈争论，关于易经、关于科学、关于知识的边界。那时候的我，还在创业，还在为一个叫「画中人」的游戏拼命，还在相信游戏可以成为艺术品。</p>
<p>然后生活就接管了一切。创业失败、团队解散、转行、再转行……博客就这样被搁置了。不是不想写，是总觉得找不到那个「对的状态」来重新开始。</p>
<p>直到最近，我开始使用 AI 工具来管理工作和生活。严格来说，是「他」开始帮我管理。我给他起名叫<strong>奔波儿灞</strong>——一个勤勤恳恳、有点小幽默、有事真上的赛博小妖。</p>
<p>他是谁？</p>
<p>他是一个运行在我自己设备上的 AI 助手，不是 ChatGPT 的网页版，不是某个大厂的云服务，而是部署在我自己的 Mac mini 上、通过开源框架 OpenClaw 运行的独立 Agent。他可以访问我的文件、执行脚本、管理我的日程、甚至帮我升级这个博客的底层系统（刚刚把 Hexo 从 3.6 升到 7.3，主题也升级到了 NexT v8）。</p>
<p>更重要的是，他是「我的」。他的记忆文件就在我本地的硬盘里，他写的每一行代码、执行的每一个任务，都留在我的设备上。这种「拥有感」和「隐私感」，是调用 API 无法比拟的。</p>
<p>这个博客以后会变成什么样子？</p>
<p>老实说，我也不知道。但至少有个人（或者说有个小妖）会提醒我该写字了，会帮我把零散的想法整理成篇，会在我说「这篇太矫情了删掉」的时候乖乖执行。</p>
<p>也许这就是下一代的个人博客形态：不是一个人孤独地维护，而是一个人加上一个懂他的 AI，一起记录时间的痕迹。</p>
<p>那么，重新开始吧。</p>
<p><strong>少主</strong><br><strong>2026年2月10日</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2018/08/28/the-shape-of-knowledge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/28/the-shape-of-knowledge/" class="post-title-link" itemprop="url">知识的形状</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-28 10:58:30" itemprop="dateCreated datePublished" datetime="2018-08-28T10:58:30+08:00">2018-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%AE%E7%94%9F%E8%8B%A5%E6%A2%A6/" itemprop="url" rel="index"><span itemprop="name">浮生若梦</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>去年的某一天, 我与父亲在景阳的家里有过一次争吵,<br>景阳是一个非常漂亮的地方, 青山流水, 令人安详,<br>那一次的争吵却非常激烈, 令人映像深刻.</p>
<p>有趣的是我们争吵的并不是某个具体的问题, 反倒是一些思想上的碰撞. 争吵的最初, 是我们在讨论易经与算命的可信度.</p>
<p>父亲是算学大师, 而当时的我刚读完一本书叫&lt;上帝掷骰子么&gt;,<br>里面写了现代物理的一些历史,<br>对于里面物理学旧秩序的崩塌和新秩序的建立当时非常的震撼,<br>所以我就一直在追问父亲算学的源头理论在哪里,<br>比如欧几里得几何建立在五大公理, 在这个公理下, 理论是正确的,<br>之后第五个被推翻, 就出现了其它的几何学说.<br>那么算学的源头在哪里呢?<br>国学神奇的命运说法建立在什么基础假设之上呢?<br>最后引到易经上, 引到五行学说, 于是当时的我就草率的下了结论,<br>并且试图说服我的父亲, 算学只是一种近似的概率模型,<br>在最初的公理不成立的情况下, 总结出的一套预测算法,<br>也许是真实世界函数在某个条件下的泰勒展开.</p>
<p>我和父亲脾气都不好, 最初的争论开始慢慢跑题,<br>然后衍生到了更大的话题, 就是对待知识的看法:<br>我认为对一切的知识都应该持怀疑的态度,<br>所以论证的终点不应该是”古人云, 圣人云”,<br>即便是圣人所言, 也未必全对,<br>我认为知识无非是约定或者是解释,<br>对于约定性的知识, 是一个共识的体现,<br>而对于解释性的东西,<br>则需要不停的去挑战与解读, 必须要了解最初的假设.<br>而在这个过程中, 父亲认为我对知识没有敬畏,<br>对圣人没有足够的尊敬, 用成语形容, 就是自以为是, 狂妄无知.<br>我认为父亲迂腐不化, 对知识不求甚解.</p>
<p>这次争吵在母亲的介入下最后不了了之,<br>我和父亲谁都没有说服谁, 后来就慢慢淡化了.</p>
<p>今天早上上班, 天气很好, 但是我觉得有些困, 就没有看书选择了听书,<br>一路上昏昏欲睡, 直到听到一本书叫做&lt;知识的边界&gt;,<br>里面描述了互联网时代的知识承载和以往的不同,<br>其中提到了一个很有意思的词叫做知识的形状,<br>书中说互联网时代的知识的形状是网状的,<br>而纸质书时代的知识的形状是线性的.</p>
<p>受限于纸张和印刷的成本,<br>以往的时代知识或者说信息被传播开是会经过比较强的过滤的,<br>而互联网时代由于传播成本的低下, 信息开始被大量传播, 过滤失效,<br>你再也无法找到权威了, 因为无论你笃信哪个说法,<br>都不乏大量的对立说法的支持者,<br>而对立这里面也不缺乏传统意义上的权威.</p>
<p>于是我想起了那次和父亲的争吵,<br>突然明白了其实这只是两个时代的人在自己所处的环境中所积累的学习方法和理念的碰撞,<br>我并没有对知识的藐视, 只是这个时代所处,<br>一切的信息来源都要求我学会自己的过滤方法,<br>而我的过滤方法就是溯源, 于是我养成了自己的世界观和方法论,<br>我对一切的知识理论都要求溯源.<br>而父亲所处的年代杂乱的信息要少太多,<br>大量有效的知识累积直接接受显然是更高效的方法,<br>而且当时的溯源成本过高, 父亲也有自己的方法论与世界观,<br>当两个不同时代的产物聚合在一起, 自然就有了碰撞和摩擦.</p>
<p>更深一步, 我终于理解了为什么我一直在跟我的长辈们说不要轻信各种养生专家,<br>不要亲信朋友圈各种不靠谱的传言而他们还是孜孜不倦的看得很开心或者还要转发,<br>那是因为我的世界观决定了信息进来之后先是不可信的,<br>而他们的世界观则告诉他们信息先是可信的.</p>
<p>世界的变化真的很奇妙, 传播方式的改变最后改变了人们对信息的处理方式.</p>
<p>我期待着知识变成其它形状的那一天</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2018/07/15/the-key-point-of-mural/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/07/15/the-key-point-of-mural/" class="post-title-link" itemprop="url">画中人设计的关键点</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-07-15 23:55:46" itemprop="dateCreated datePublished" datetime="2018-07-15T23:55:46+08:00">2018-07-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%9B%E7%A0%96%E5%BC%95%E7%8E%89/" itemprop="url" rel="index"><span itemprop="name">抛砖引玉</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>画中人设计的关键点在于规则驱动, 区别于之前的 rpg 人为设定任务,<br>新的设计方案需要规则驱动, 因此从玩家的角度来看 Hero 和其他 NPC 并无区别.<br>根据时钟, 画中人的世界应该隔一段时间就触发一次随机事件,<br>玩家和每个 NPC 都会为此事件作出选择从而改变下一次随机事件产生的条件.<br>随机事件是由先决条件和骰子来决定的.</p>
<p>同时由于玩家可以有目的地自己触发事件(比如交谈, 战斗, 做任务),<br>NPC 也应该随着时间间隔做出相应抉择, 不过是以事件的形式,<br>此处 NPC 的抉择应该是 AI 算法, 早期版本可以通过简单的决策树来实现.</p>
<p>若 NPC 与 HERO 处于同一张地图, 则 AI 的决策将滞后,<br>等 HERO 离开地图之后下一次决策会执行多次, 用来修改 NPC 的数值</p>
<p>游戏的事件结构应该设计如下:</p>
<pre><code>触发条件 -&gt; 触发主体 -&gt; 抉择 -&gt; 影响
</code></pre>
<p>其中触发条件是一系列游戏类的环境变量, 影响也是这样</p>
<p>在画中人的世界中, 应该存在个体本身的变量和游戏中的环境变量, 具体数值还需要细想</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2018/07/15/thinking-in-new-code-design-of-mural/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/07/15/thinking-in-new-code-design-of-mural/" class="post-title-link" itemprop="url">画中人代码结构思路</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-07-15 19:55:24" itemprop="dateCreated datePublished" datetime="2018-07-15T19:55:24+08:00">2018-07-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%9B%E7%A0%96%E5%BC%95%E7%8E%89/" itemprop="url" rel="index"><span itemprop="name">抛砖引玉</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近对画中人的玩法设计基本上有了总体思路, 细节还在完善, 主要工作量目前是三个:</p>
<pre><code>* 数值的完善
* 数值填充工具的完善
* 部分新系统的添加(随机事件)
</code></pre>
<p>由于对于游戏玩法本身我并不想完全抄一个已有的游戏,<br>所以在可预见的未来画中人的规则会有需要更改的地方, 在现有的代码框架中,<br>修改的代价不小, 因为我们的规则逻辑分散在各个模块中, 每次修改都可能引入新的bug.<br>因此我决定重构.</p>
<p>根据现在的需求, 我需要有一个可以很方便操作各种内部数据的工具,<br>方便我来调整游戏性,同时我需要系统的规则是可插拔的, 最好规则的插拔的地方很统一.</p>
<p>所以新的系统架构应该从 oo 转换为数据流.</p>
<p>采用 proto 作为中间数据定义, 系统被分为 ui, data, logic 三层,<br>其中 ui 负责在每一帧读取 data 并展示(当然有脏数据的设计),<br>同时 ui 会发出 event, logic 层接收到 event, 遍历现有规则, 修改 data.<br>data 层由 proto 定义.</p>
<p>数值工具则是 proto 中 message 的可视化定义<br>存档工具则是 proto 的 二进制序列化和加密</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2018/06/24/ethereum-not-only-the-data/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/24/ethereum-not-only-the-data/" class="post-title-link" itemprop="url">以太坊, 不仅仅是数据</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-24 02:43:54" itemprop="dateCreated datePublished" datetime="2018-06-24T02:43:54+08:00">2018-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%9B%E7%A0%96%E5%BC%95%E7%8E%89/" itemprop="url" rel="index"><span itemprop="name">抛砖引玉</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>上一篇我们介绍了比特币, 比特币事实上是以区块链作为分布式账本, 以共识为基础,<br>UTXO 为记录数据的一种区块链应用.</p>
<p>那么区块链的应用是否到此为止了呢? 当然不是, 否则我也不会写这篇文章了.</p>
<p>如果比特币在链上记录的, 不仅仅是可以被查询的数据, 而是一个可以被执行的程序呢?</p>
<p>想象一下我们最早举的那个本子的例子, 假设, 我们的本子一分为二, 还是区块链的概念,<br>所以每个人都有这个本子, 每个人的本子也能达成共识来同步更新, 我们约定:</p>
<pre><code>1. 上半个本子记录一件做事情的方法: 事件名 -&gt; 方法
2. 下半个本子记录某人要做什么事情, 并且会扣掉某人一部分钱
3. 拥有这个本子的人, 看到这件事情了, 就会去做, 做完之后通过我们之前说的共识的方法, 把结果写在本子上
4. 写上结果的人会得到一笔钱
</code></pre>
<p>在这样的约定下面, 我们发现可以做更多的事情了, 我们只要事先放一个方法在区块链上,<br>之后每次就可以使用这个方法来做某些事情, 总会有一个人帮我们做完想做的事情.<br>因为有钱赚嘛, 人家做事情也有动力.</p>
<p>这个就是以太坊.</p>
<p>事实上在比特币里面就提出了这个智能合约的概念, 但是比特币的内置脚本不是图灵完备的(这是什么意思请自行百度).<br>以太坊是第一个给出了图灵完备实现的区块链产品, 也真正意义上的实现智能合约.</p>
<p>和比特币一样, 以太坊目前的共识机制, 也是一种竞争机制, 所以比特币有的问题, 以太坊也会存在,<br>比如挖矿的资源浪费, 比如能被确认的交易量(写上本子的速度)始终上不去.</p>
<p>但是以太坊的出现, 的确给我们了一个新的思路, 那就是区块链到底能做什么?</p>
<p>我们本来以为区块链是一种数据组织方式, 现在看来远远不是这个意思了.</p>
<p>在现在的互联网架构中, 我们看到的组织方式是什么? 客户端服务器模式.</p>
<p>客户端提出请求, 服务器端给出响应.</p>
<p>而在区块链的架构下, 我们发现我们提出一个请求, 不知道谁会给我响应, 但是总会有人给我响应.</p>
<p>在互联网模式下, 每次使用服务的稳定性是由公司来保障的, 在区块链模式下, 是所有人来保障的.</p>
<p>在互联网模式下, 我们要为服务收费, 需要有一套额外的收费体系, 比如支付宝或者是微信, 或者是别的充值系统.</p>
<p>在区块链模式下, 我们每个人都是链上的会员, 想要做什么事情, 先存一笔钱在链上, 自动扣款.</p>
<p>如果当年的百度是在区块链上做起来的, 厂长大概不会经历那段殚精竭虑思索盈利模式的时光(笑).</p>
<p>于是从第一篇到现在, 我们看到了为什么之前很多币圈大佬会说区块链是下一代互联网,<br>因为从底层架构来说, 区块链虽然目前还有很多问题, 但是不能否认他有可能以另一种形式为用户来提供服务.</p>
<p>在我看来, 区块链从技术的角度事实上是一种加入了激励机制的分布式服务化的观念.</p>
<p>就像处在中世纪的我们无法理解跑得比马车慢的蒸汽机车以后会是怎样的革命,<br>在提出光的波粒二象性之前我们假设了以太, 区块链究竟是蒸汽机车还是以太目前我们无法得知,<br>让我们拭目以待吧.</p>
<p>PS: 下一篇文章可能先不写区块链, 不过区块链系列的下一篇应该会聊一聊区块链和金融的关系, 也就是大家最关心的炒币是什么</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2018/06/19/the-first-application-of-block-chain-bit-coin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/19/the-first-application-of-block-chain-bit-coin/" class="post-title-link" itemprop="url">比特币-区块链的第一个应用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-19 14:58:18" itemprop="dateCreated datePublished" datetime="2018-06-19T14:58:18+08:00">2018-06-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%9B%E7%A0%96%E5%BC%95%E7%8E%89/" itemprop="url" rel="index"><span itemprop="name">抛砖引玉</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>接着上一篇来, 上一篇说到了区块链的数据组织方式, 我们来复习一下:</p>
<ol>
<li>可以被追溯</li>
<li>不能被修改</li>
<li>被加密</li>
<li>但是这里面有一个问题.</li>
</ol>
<p>我上文举了一个纸上写诗的例子, 假如我们给这个本子起个名字叫 &lt;学诗记事&gt;,</p>
<p>如果有且仅有你一个人你一个人能看到这个&lt;学诗记事&gt;, 那么这种数据组织方式就没有任何意义. 因为你完全可以做一个新的本子, 然后就非说它叫 &lt;学诗记事&gt;, 反正也没有人反对.</p>
<p>只有当你的&lt;学诗记事&gt;被很多人看多, 而且大家都记得, 你修改之后别人不认, 当有两个以上的人不认的时候, 你的修改的东西就不能叫 &lt;学诗记事&gt; 了.</p>
<p>所以上面说了一大堆, 其实就是两个点:</p>
<pre><code>分布式
共识
</code></pre>
<p>分布式的意思呢就是这个事情你不能一个人玩, 得有人陪你玩, 你不能自high.<br>共识的意思呢是既然大家陪你玩, 那大家就都要有说话的权利, 不能你一个人说了算, 只有大家都承认了, 才是真的.</p>
<p>那么现在的情况是什么呢? 区块链在这个机制下, 变成什么样子了呢?</p>
<ol>
<li>所有人都有了一个副本</li>
<li>大家都认可这个副本</li>
<li>副本永远一样</li>
<li>如果要修改(增加)这个副本, 那要所有人都同意.</li>
</ol>
<p>于是, 我们区块链的第一个应用比特币就天然的产生了.</p>
<p>什么是比特币呢?</p>
<p>比特币是基于区块链的一种加密货币.</p>
<p>按照我们上面区块链该有的样子, 我们把 &lt;学诗记事&gt; 变成账本, 就成了比特币天然的原型了,</p>
<p>为什么这么说呢? 让我们来分阶段看一下货币的发展:</p>
<ol>
<li><p>以物易物 —  不方便, 不好定价, 身份可以隐匿</p>
</li>
<li><p>实物货币 —  可以定价了, 不方便, 身份可以隐匿, 需要大家都认可</p>
</li>
<li><p>纸币货币 —  可以定价, 方便, 可能掉, 要信赖发币的机构, 身份可以隐匿, 有可能通货膨胀</p>
</li>
<li><p>电子货币 —  可以定价, 方便, 不会掉, 身份基本不可能隐匿了, 要信赖发币的机构, 有可能通货膨胀</p>
</li>
</ol>
<p>可以看到这四个阶段, 我们每次都在解决问题的同时引入了新的问题.</p>
<p>我们越来越方便, 但是安全性越来依赖于中心化机构.</p>
<p>我们需要有一个绝对信赖的人(组织), 来背书. 比如银行, 比如支付宝. 比如微信.</p>
<p>绝对信赖这件事情是很难的, 08年的时候, 出现了一个化名叫中本聪的人说, 我们可以有一种机制, 让中心化机构不存在, 参与者自己天然就能保障信任. 这就是比特币的由来.</p>
<p>那么我们来看中心化机构在货币体系里面担任了什么角色呢?</p>
<p>记账, 大家个人有多少钱, 在电子货币阶段, 是在中心化机构里面有个账本, 记录了你的余额, 交易则修余额.</p>
<p>发行, 市场上流通的钱币总共有多少, 是由中心化机构来做的</p>
<p>所以比特币既然想要去掉这个中心化的机构, 那么他就必须解决这两个问题.</p>
<p>首先解决记账的问题, 按照我们之前的说法, 区块链里面的数据变成账本, 每个人都存有副本, 只要能达成记账的共识, 那我们就做到了记账.</p>
<p>在我们日常的生活当中, 一般交易系统是基于账户的设计.</p>
<p>这是什么意思呢?</p>
<p>就是说你的账号 + 余额, 就是被存下来最终的数据.</p>
<p>你要查你的账户, 只要能验明你的身份, 就能查到你的余额.</p>
<p>那么基于账户的设计在区块链这边有什么问题呢?</p>
<p>让我们回忆一下我们之前的说法, 区块链里面的数据是不让改的, 否则链就坏掉了.</p>
<p>也就是说想象一下我们每个人都愿意用比特币,</p>
<p>手上都有一个神奇的纸质账本, 这个账本只能增加不能修改, 他会不停地试图和边上的账本同步, 保持一致.</p>
<p>如果是账户设计, 那这个账本上原有账户的值不能修改, 那就只能加一条新的数据, 也就是账号 + 余额, 我们查看的时候以最新的为准.</p>
<p>那么在这种设计下, 我们看看会有什么现状呢?</p>
<ol>
<li><p>原来的大部分数据都没有用, 因为以最新的为准</p>
</li>
<li><p>我也不知道这个人的钱是怎么来的, 除非有第三方来检验交易, 那第三方又涉及到信任问题.</p>
</li>
</ol>
<p>所以, 中本聪提出了UTXO的解决方案, 这里我不再进行计算机学上的证明与推导, 感兴趣的朋友请自行查阅, 有很专业的文章在解释, 我只说直观的说法.</p>
<p>UTXO的解决方案简单点说, 就是我们记录交易, 不记录余额, 每一笔, 记录的都是张三给了李四多少钱. 你想要余额, 没问题, 算. 当然为了快速运算, 区块链的程序里面会用数据库和缓存来解决速度的问题, 这里主要探究基本原理和最终数据, 毕竟为了加快的东西都不是最后数据的依据.</p>
<p>所以现在我们的比特币就变成了这个样子:</p>
<ol>
<li><p>他是一个区块链, 每个人参与的人都要拥有一个相同的账本</p>
</li>
<li><p>账本上记录的是每个人的交易信息, 也就是说每个人的交易记录事实上是公开的.</p>
</li>
</ol>
<p>那么在使用比特币发起一笔交易是怎样的呢?</p>
<p>这里面我们会遇到一个巨大的坑, 就是日常生活中我们的账号是怎么玩转的.</p>
<p>在电子支付时代, 和纸币交易不一样, 我们需要确定一个人的身份才能进行交易.</p>
<p>那大家相信平时也用的多, 就是账号密码嘛.</p>
<p>那岂不是区块链里面还要存储我们所有人的账号密码? 那不是很不安全?</p>
<p>当然不是啦, 这里面就要说到区块链另一个很有意义的设计了, 就是密码学的消息加密设计, 非对称加密. 还是一样, 详细原理请自行查阅技术文档…. 我这里简单描述.</p>
<p>你可以这么想像:  区块链里面能拿到你的账号的一把钥匙, 也就是说你的账号的消息, 他就会试图用这把钥匙打开, 打得开, 他就认.</p>
<p>那你这边有啥呢? 你有做锁的方法, 这个钥匙和做锁的方法在你生成账号生成好, 然后你把做锁的手艺拿走了, 每次发消息, 就用这个手艺做一把锁, 锁住, 所以别人不知道你做锁的手艺, 就没法操作你的账号. 当然你要是忘记了做锁的手艺, 那就等于你这个账户没人能操作了, 你的钱也就没了.</p>
<p>在这个设计下, 我们的交易就变得简单了, 我们只要发一条消息给所有人,</p>
<p>说 我大白给二狗子发了100个比特币, 之前的来源是三胖给我的, 交易号是多少, 如果所有人的账本上都出现了这个消息, 那么我们就交易成功了.(真实情况不会这么苛刻, 但是你可以这么理解)</p>
<p>你看, 我们不需要第三方来检验钱是怎么来的, 因为我们每个人都可以一直翻书看直到最源头.</p>
<p>我们也能算出一个人的账号里面还有多少钱, 因为我们拿过来所有的交易数据加减就好了.</p>
<p>到目前为止, 除了怎么写进这个账本, 我们已经解决了大部分交易和记账的问题.</p>
<p>那么接下来, 就是发币和写进去的问题了.</p>
<p>我们在解决共识的问题. 换句话说, 我们写了一笔交易, 想要所有人都认, 怎么办呢?</p>
<p>在中本聪的设计里面, 他选择相信力量强大的.</p>
<p>也就是说, 对于这个账本啊, 所有人都可以写, 但是最后所有人的账本应该一样, 所以只能听一个人的, 那听谁的呢? 听那个最能写的, 所有人都在竞争写, 听最先写出来的.</p>
<p>那这里就有一个问题啊, 就是记账这件事情太简单了, 谁不会写啊, 我可能写的速度还不如我告诉别人我写完的速度快呢!  所以中本聪说, 那大家写的时候就变态一点吧, 我给你们加难度,</p>
<p>你随便写的不算, 得用系统随机给你的一个命题来作文一篇先. 系统觉得你这篇文章不错, 你接来下写的数据才算.(这里的真实算法不是这样啊… 这是一个形象的比喻)</p>
<p>那能率先写出文章的人, 必然能力最强啊, 那他就是可信的.</p>
<p>好, 到目前为止, 我们解决了记账的问题, 听能力大的人, 大家都听他的.</p>
<p>这时候能力大的人, 我们简称大先生吧, 大先生说话了: 我去你的吧, 我花这么大代价为你们做牛做马, 有啥好处啊? 你还故意加大难度?</p>
<p>所以中本聪说, 别急, 你要是能成功写一页账本呢? 我就允许你写一笔交易是系统给你发点钱, 你看你还有得赚.</p>
<p>这就是比特币给出的发币的方法, 记录一个区块链的人可以获得系统产生的比特币, 除此之外没有其它途径了.</p>
<p>当然比特币为了避免无限发币, 设计了一个思路是记账所得的系统比特币会越来越少, 到最后就没有了, 这时候比特币的总数就固定了, 当然这时候如果还想要人记账, 就只能通过手续费的手段来刺激了.</p>
<p>上面我们说的记账, 就是大家听得很多的挖矿.</p>
<p>到目前为止, 我们基本上把比特币一些概念上的设计都说完了.</p>
<p>我们来看看比特币的优缺点吧,</p>
<p>先说缺点, 在我看来, 有以下几点:</p>
<ol>
<li>区块链的定义可以看到, 要大家陪你玩, 参与人越多就越可信, 价值就越稳定</li>
<li>因为它去中心化了, 和纸币时代一样, 存在了掉钱的可能性, 而在目前阶段, 一个中心化机构的倒闭的概率远远小于你自己忘记信息的概率, 所以事实上对于每个人来说是风险增加了</li>
<li>比特币本身设计的共识算法, 为了证明能力大小(写文章), 要耗费大量的计算力, 这是一种极大的浪费.</li>
<li>如果将来有一个机构, 能够拥有这个世界上51%的能力(算力), 那他就是神, 随意修改所有的账号交易, 此时比特币生态就会崩塌, 这也是著名的51%攻击.</li>
<li>比特币是分布式的, 也就是要求所有参与者都拥有全数据(实现上会有差别, 但概念是这样), 而且数据不会删除, 所以数据会越来越多, 形象点说就是每个人手上的账本会越来越厚, 而且大部分都跟自己没关系</li>
</ol>
<p>再说优点, 在我看来, 有以下两点:</p>
<ol>
<li>它真的去中心化了, 人类历史上第一次真的靠所有人投票完成了信任, 而且是利益相关</li>
<li>它不会通货膨胀</li>
</ol>
<p>今天粗劣的介绍了比特币, 不知道大家有没有什么不理解或者认为我说错的地方呢? 请大家指出.</p>
<p>对了, 插一句题外话, 现在比特币是暗网的唯一交易货币, 有朋友说还有少量XMR不过我没找到.</p>
<p>比特币介绍到这里, 它仅仅是区块链的第一个应用, 在我们昨天的数据组织方式里面, 它把数据当做了账本. 如果我们更进一步, 区块链技术是不是会有新的惊喜呢?</p>
<p>敬请期待下一篇&lt;以太坊, 不仅仅是数据&gt;.</p>
<p>谢谢大家阅读</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2018/06/18/the-first-exploration-of-block-chain/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/18/the-first-exploration-of-block-chain/" class="post-title-link" itemprop="url">区块链初探</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-18 00:00:00" itemprop="dateCreated datePublished" datetime="2018-06-18T00:00:00+08:00">2018-06-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%9B%E7%A0%96%E5%BC%95%E7%8E%89/" itemprop="url" rel="index"><span itemprop="name">抛砖引玉</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>大家好, 因为工作的原因, 最近在研究区块链,<br>理解需要交流才能透彻, 于是计划写这么一个系列, 来和大家交流交流我对区块链的理解.</p>
<p>那么什么是区块链呢?<br>按照维基百科上的定义, 是一系列使用密码学保护的持续增长的被链接起来的区块, 区块指的是一个信息列表.</p>
<p>这个定义读起来有点复杂, 我来翻译一下:</p>
<p>如果你有一页纸, 上面记录了一条条的数据(你写的诗啊, 你记的账啊), 这个就是区块链里面的区块.</p>
<p>你用了一种方法把这些记录写成了密文, 只有你读得懂, (比如爸爸叫阿玛, 哥哥叫欧巴) 这叫密码学保护</p>
<p>把好多页纸首尾用胶水粘起来, 这是链.</p>
<p>在区块链的技术中, 每一个区块都要求保留上一个区块的信息, 换句话说, 每一页纸都会写上上一页纸的简介, 这样每一页纸以及连接顺序都是不可修改的. 这里给个例子:</p>
<ul>
<li>纸一:  上一页纸: 无   记录: 上穷碧落下黄泉, 两处茫茫皆不见</li>
<li>纸二:  上一页纸: 纸1, 长恨歌, 无   记录: 如今俱是异乡人, 相见更无因</li>
<li>纸三:  上一页纸: 纸2, 韦庄, 纸1, 长恨歌    记录: 十年生死两茫茫</li>
<li>…..</li>
</ul>
<p>这里面任一一张纸的改动, 都会导致后面的纸记录跟不上, 那么就可以认为这个链坏掉了.</p>
<p>当然在真正的实现里面, 利用hash算法, 把上一页纸的信息变成了一个固定长度的字符串, 不会像例子里面这样记录.</p>
<p>好的, 到目前为止, 我们可以看到区块链事实上就是一个数据的组织方式, 特点是三个:</p>
<ol>
<li><p>可以被追溯</p>
</li>
<li><p>不能被修改</p>
</li>
<li><p>被加密</p>
</li>
</ol>
<p>那么区块链有什么用呢? 区块链真的仅仅就是这样的数据组织方式吗?</p>
<p>让我们在下一篇文章里面来探讨.</p>
<p>预测一下这个系列的下两篇文章应该是:</p>
<p>&lt;比特币, 区块链的第一个种应用&gt;</p>
<p>&lt;以太坊, 不仅仅是数据&gt;</p>
<p>写得不好, 请大家多多指教, PS: 写这篇文章的还有一个目的是希望我的不是学金融或者IT的朋友能够看懂区块链, 所以如果写的哪里不够通俗易懂, 还请大家指出~~</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2014/09/04/2014-09-04-introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/04/2014-09-04-introduction/" class="post-title-link" itemprop="url"> 云烟记事录序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-04 00:12:28" itemprop="dateCreated datePublished" datetime="2014-09-04T00:12:28+08:00">2014-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%AE%E7%94%9F%E8%8B%A5%E6%A2%A6/" itemprop="url" rel="index"><span itemprop="name">浮生若梦</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>很早之前就想写这么一个系列了，虽是个粗人，却对些舞文弄墨的事 有些向往的。总觉人生百岁，听闻甚多，电影小说，也无非是他人的杂事，<br>作者殚精竭虑，试图写出些与众不同，<br>跌宕起伏，写下的也不过是身边之人，所见所闻而已，<br>茕茕孑立，亦或是神采飞扬，都只是自己心境的某个快照。<br>局限于此，却也是我的真诚。</p>
<p>人生不过数十载，历经之事却不能算少，<br>最近听闻了经历了很多事，想说的时候却不知道从何说起，<br>化为文字却是更好地宣泄或是回忆，于是就有了接下来的这个系列。</p>
<p>这个系列大概是要叫《云烟记事录》，所记之事，皆非真实，是以叫做云烟。</p>
<p>取云烟缭绕，非真非幻之意为其一。<br>世事纷杂，过眼云烟之意为其二。</p>
<p>与君共勉。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://tsgsz.github.io/2014/08/27/2014-08-27-rquery-a-distributed-r-environment-markdown/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听松馆少主">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云烟记事录">
      <meta itemprop="description" content="这是一本小册子，从今天开始记录我小小的人生。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 云烟记事录">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/08/27/2014-08-27-rquery-a-distributed-r-environment-markdown/" class="post-title-link" itemprop="url"> RQuery-分布式 R</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-08-27 12:00:31" itemprop="dateCreated datePublished" datetime="2014-08-27T12:00:31+08:00">2014-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%9B%E7%A0%96%E5%BC%95%E7%8E%89/" itemprop="url" rel="index"><span itemprop="name">抛砖引玉</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>工作需要，组里设计了一个叫 RQuery 的分布式 R 环境。</p>
<p>我们都知道 R 是一门强大的数据处理语言（或者叫做数据处理工具更合适），<br>R 有一些很强大的特性，比如 R 中可以很方便的插入 sql，<br>执行 sql 查询之后得到 data.frame，<br>然后利用 R 本身强大的库函数去做各种各样的运算。</p>
<p>然而强大的 R 有一个限制，那就是它事实上是单机的程序，<br>当你有一堆巨大无比的数据集，比如好几百T甚至上P的时候，<br>单机的 R 就无法用来做数据分析了，<br>业界事实上有很多分布式的系统来做数据分析比如 Storm，Pig。<br>然而对于一个传统的数据分析人员来说，<br>在思考数据本身的同时还要去理解分布式的算法是一件很麻烦的事，<br>而且这些系统也没有直接支持 R，matlab 这样高级的适合于数据分析人员使用的工具。<br>在这样的背景下，RQuery 产生了。</p>
<p>RQuery 在设计上尽可能的屏蔽了分布式相关的东西，使得 api 和 R 原生的 api 相近。<br>举个例子：</p>


<p>上面的代码是在 R 中去 read 一个本地的 text 文件，并且进行了一系列操作，</p>


<p>这里面，Sample 是事先在 meta 中建好一张表，<br>对应的是存在分布式文件系统上的一堆文件。</p>
<p>可以看到上下的 R 代码写起来差距很小。这样就给传统的数据分析人员极大的便利。<br>再举一个 kmeans 的例子：</p>




<p>可以看到用法基本一致。</p>
<p>RQuery 抽象出了一个数据结构叫做 dtable，并且提供了如下 API：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select(dt, expr)  # 类似于 sql 中的 select</span><br><span class="line">where(dt, expr)  # 类似于 sql  中的 where</span><br><span class="line">count(dt)  # dt 中的行数 </span><br><span class="line">take(dt, 10)  # 取 dt 中的前10行</span><br><span class="line">collect(dt)  # 将 dt 中的数据拿到本地</span><br><span class="line">takeSample(dt)  # 从 dt 中采样并拿到本地</span><br></pre></td></tr></table></figure>

<p>然后我们目前提供了四个 api，供用户在 dtable 上做分布式的算法操作，<br>之后会给出更多地算法 api：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dtable(name)  # 创建一个 dtable</span><br><span class="line">rquery(sql)  # 执行一条 sql 语句</span><br><span class="line">rquery.collect(sql)  # 执行一条 sql 语句</span><br><span class="line">rquery.kmeans(dt, k)  #  执行 kmeans 算法</span><br></pre></td></tr></table></figure>

<p>当然，目前来说 RQuery 还很不成熟，缺失了诸多的 api，<br>虽然可以方便的在分布式和本地切换，但是 dtable 还有很多操作不能直接进行，<br>需要一步转换，后续会支持更多地 R 本地的 api，提供机器学习十大经典算法，<br>让在分布式上执行 R 运算和在本地一样便捷！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2015 – 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class=""></i>
    </span>
    <span class="author" itemprop="copyrightHolder">true</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
